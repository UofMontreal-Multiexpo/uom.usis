% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions.R
\name{join_db}
\alias{join_db}
\title{Join data from IMIS, OIS or both databases}
\usage{
join_db(db, estab_names = FALSE)
}
\arguments{
\item{db}{Name of the database from which to join data.
Character corresponding to \code{DB_IMIS}, \code{DB_OIS} or \code{DB_USIS}.}

\item{estab_names}{\code{TRUE} or \code{FALSE} whether to include establishment names
in the join.}
}
\value{
A single data frame combining all tables from the package. Its row
names are measure identifiers.
}
\description{
Join USIS data into a single data frame. Consider the main datasets (those
named \code{USIS_inspections}, \code{USIS_sheets} and \code{USIS_measures}), combine them
according to sheet and inspection identifiers, and combine the result with
the corresponding values from the other datasets (\code{OCC}, \code{USIS_agencies},
\code{USIS_establishments}, etc.).
}
\details{
Additional variables created (regarding the datasets \code{USIS_inspections},
\code{USIS_sheets} and \code{USIS_measures}) are the following.
\describe{
\item{\code{inspection_type_name}}{Inspection types corresponding to
identifiers from \code{USIS_inspections$inspection_type_id}.}
\item{\code{scope_name}}{Inspection scopes corresponding to identifiers from
\code{USIS_inspections$scope_id}.}
\item{\code{agency_type}}{Types of agencies from \code{USIS_inspections$agency_id}.}
\item{\code{establishment_id}}{Establishment identifiers corresponding to
workplace identifiers from \code{USIS_inspections$workplace_id}.}
\item{\code{establishment_type}}{Types of establishments from
\code{establishment_id}.}
\item{\code{location_id}}{Location identifiers corresponding to establishment
identifiers from \code{establishment_id}.}
\item{\code{territory_id}}{Territory identifiers corresponding to location
identifiers from \code{location_id}.}
\item{\code{territory_name}}{Territories corresponding to identifiers from
\code{territory_id}.}
\item{\code{city}}{Cities corresponding to location identifiers from
\code{location_id}.}
\item{\code{zip}}{Postal codes corresponding to location identifiers from
\code{location_id}.}
\item{\code{sic_id}}{SIC identifiers corresponding to workplace identifiers from
\code{USIS_inspections$workplace_id}.}
\item{\code{sic_name}}{Industries corresponding to identifiers from \code{sic_id} in
the SIC classification (the U.S. Standard Industrial
Classification).}
\item{\code{naics_id}}{NAICS identifiers corresponding to workplace identifiers
from \code{USIS_inspections$workplace_id}.}
\item{\code{naics_name}}{Industries corresponding to identifiers from \code{naics_id}
in the NAICS classification (the North American Industry
Classification System).}
\item{\code{occ_name}}{Occupations corresponding to identifiers from
\code{USIS_measures$occ_id} in the OCC classification (U.S. census
occupational classification system).}
\item{\code{sample_type_name}}{Sample types corresponding to identifiers from
\code{USIS_measures$sample_type_id}.}
\item{\code{substance_name}}{Substance names corresponding to identifiers from
\code{USIS_measures$substance_id}.}
\item{\code{measure_unit_name}}{Measure units corresponding to identifiers from
\code{USIS_measures$measure_unit_id}.}
\item{\code{exposure_type_name}}{Exposure types corresponding to identifiers
from \code{USIS_measures$exposure_type_id}.}
}

An additional list column named \code{establishment_names} containing
establishment names corresponding to establishment identifiers from
\code{establishment_id} is added after this column if argument \code{estab_names} is
\code{TRUE}.
If so, the memory usage of the resulting object increases significantly.
}
\note{
This function is not exported from the package.
}
\examples{
## Create the full USIS data frame
join_db(DB_USIS)

## Create the full OIS data frame, including establishment names
join_db(DB_OIS, estab_names = TRUE)

}
\author{
Gauthier Magnin
}
\keyword{internal}
